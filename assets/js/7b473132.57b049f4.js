"use strict";(self.webpackChunkcourses=self.webpackChunkcourses||[]).push([[8756],{28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var t=n(96540);const a={},i=t.createContext(a);function r(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:s},e.children)}},30392:(e,s,n)=>{n.d(s,{A:()=>t});const t="data:image/webp;base64,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"},31070:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"tock_workshop/index","title":"Introduction","description":"Prerequisites","source":"@site/docs/tock_workshop/index.md","sourceDirName":"tock_workshop","slug":"/tock_workshop/","permalink":"/docs/tock_workshop/","draft":false,"unlisted":false,"editUrl":"https://github.com/ipworkshop/ipworkshop.github.io/edit/main/docs/tock_workshop/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Blockchain","permalink":"/docs/blockchain/"}}');var a=n(74848),i=n(28453);const r={},l="Introduction",c={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Rust Toolchain",id:"rust-toolchain",level:3},{value:"<code>probe-rs</code> install",id:"probe-rs-install",level:3},{value:"<code>arm-none-eabi</code> toolchain",id:"arm-none-eabi-toolchain",level:3},{value:"<code>tockloader</code>",id:"tockloader",level:3},{value:"CY8CPROTO-062-4343W board",id:"cy8cproto-062-4343w-board",level:2},{value:"Microcontroller",id:"microcontroller",level:3},{value:"Wireless Connectivity",id:"wireless-connectivity",level:3},{value:"Tock",id:"tock",level:2},{value:"Architecture",id:"architecture",level:3},{value:"Hands-on Workshop",id:"hands-on-workshop",level:2},{value:"Flashing the kernel",id:"flashing-the-kernel",level:3},{value:"Compiling an application",id:"compiling-an-application",level:3},{value:"Flashing the application",id:"flashing-the-application",level:3},{value:"Building a capsule",id:"building-a-capsule",level:3},{value:"Writing an application",id:"writing-an-application",level:3},{value:"Periodic Print",id:"periodic-print",level:3},{value:"Tock <code>Alarm</code> design",id:"tock-alarm-design",level:4},{value:"<code>Component</code> system",id:"component-system",level:4},{value:"Refactor board&#39;s configuration",id:"refactor-boards-configuration",level:4},{value:"Temperature Sensor Capsule",id:"temperature-sensor-capsule",level:3},{value:"Current state",id:"current-state",level:4},{value:"<code>TemperatureSensor</code> in Tock",id:"temperaturesensor-in-tock",level:4},{value:"State machine design",id:"state-machine-design",level:4},{value:"Computing the temperature",id:"computing-the-temperature",level:4},{value:"Defining the component",id:"defining-the-component",level:4},{value:"Adding the capsule to the board",id:"adding-the-capsule-to-the-board",level:4},{value:"Sensors application",id:"sensors-application",level:4}];function h(e){const s={a:"a",admonition:"admonition",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",math:"math",mdxAdmonitionTitle:"mdxAdmonitionTitle",mermaid:"mermaid",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",msup:"msup",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,a.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsx)(s.admonition,{title:"Windows Users or participants that are willing to use a VM",type:"note",children:(0,a.jsxs)(s.p,{children:["This workshop will not work on Windows systems.\nYou can try following the guide using a Linux VM/WSL2,\nor you can use the NixOS VM we provide ",(0,a.jsx)(s.a,{href:"https://drive.google.com/file/d/1-jOsuWdSnOlmyupMWb3Vw4oG_t77BnwQ/view?usp=sharing",children:"here"})," (only works on VirtualBox).\nThe username and password are both ",(0,a.jsx)(s.code,{children:"ipwembedded"}),".\nIf you will be using the NixOS VM, you can skip the prerequisites."]})}),"\n",(0,a.jsx)(s.h3,{id:"rust-toolchain",children:"Rust Toolchain"}),"\n",(0,a.jsxs)(s.p,{children:["You will need to install the Rust toolchain. To do so, you can follow the instructions on the ",(0,a.jsx)(s.a,{href:"https://www.rust-lang.org/learn/get-started",children:"Getting started"})," page of the Rust Language website."]}),"\n",(0,a.jsxs)(s.p,{children:["To verify that the installation, open a terminal and run ",(0,a.jsx)(s.code,{children:"rustup --version"}),". If everything went well, you should see an output similar to this:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"rustup 1.28.1 (f9edccde0 2025-03-05)\ninfo: This is the version for the rustup toolchain manager, not the rustc compiler.\ninfo: The currently active `rustc` version is `rustc 1.86.0 (05f9846f8 2025-03-31)`\n"})}),"\n",(0,a.jsxs)(s.h3,{id:"probe-rs-install",children:[(0,a.jsx)(s.code,{children:"probe-rs"})," install"]}),"\n",(0,a.jsx)(s.p,{children:"This tool is an embedded debugging and target interaction toolkit. It enables its user to program and debug microcontrollers via a debug probe."}),"\n",(0,a.jsxs)(s.p,{children:["The simplest installation method involves using the ",(0,a.jsx)(s.code,{children:"cargo"})," packet manager, but first you have to install the prerequisites:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"On Debian-based Linux, use the following command:"}),"\n"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"sudo apt install -y pkg-config libudev-dev cmake git\n"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"On Mac OS, no additional setup is needed."}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["After that, use ",(0,a.jsx)(s.code,{children:"cargo"})," to install ",(0,a.jsx)(s.code,{children:"probe-rs"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"cargo install probe-rs-tools@0.29.1 --locked\n"})}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsxs)(s.p,{children:["The lastest ",(0,a.jsx)(s.code,{children:"probe-rs"})," version does not work with the PSoC 6 board, we have to use an older version, 0.29.1."]})}),"\n",(0,a.jsxs)(s.p,{children:["If you are using Linux, you will also need to add this ",(0,a.jsx)(s.a,{href:"https://probe.rs/files/69-probe-rs.rules",children:"udev"})," file in ",(0,a.jsx)(s.code,{children:"/etc/udev/rules.d"}),". Then, run as root:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"udevadm control --reload # to ensure the new rules are used.\nudevadm trigger # to ensure the new rules are applied to already added devices.\n"})}),"\n",(0,a.jsxs)(s.h3,{id:"arm-none-eabi-toolchain",children:[(0,a.jsx)(s.code,{children:"arm-none-eabi"})," toolchain"]}),"\n",(0,a.jsxs)(s.p,{children:["You will need to install the ARM toolchain in order to compile applications written in C. You can find the pre-built binary archives on the ARM ",(0,a.jsx)(s.a,{href:"https://developer.arm.com/downloads/-/gnu-rm",children:"Downloads Page"}),". Alternatively, if you are on Linux, you can install it by running the following command in terminal:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"sudo apt install gcc-arm-none-eabi\n"})}),"\n",(0,a.jsx)(s.h3,{id:"tockloader",children:(0,a.jsx)(s.code,{children:"tockloader"})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"tockloader"})," tool is a useful and versatile tool for managing and installing applications on Tock. In order to install it, you will need to have Python installed. You can download the latest version of on the ",(0,a.jsx)(s.a,{href:"https://www.python.org/downloads/",children:"official website"}),". You will also need to install ",(0,a.jsx)(s.code,{children:"pipx"}),", following the ",(0,a.jsx)(s.a,{href:"https://pipx.pypa.io/stable/installation/",children:"installation guide"}),". Then you can install it by running:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"pipx install tockloader\npipx ensurepath\n"})}),"\n",(0,a.jsx)(s.h2,{id:"cy8cproto-062-4343w-board",children:(0,a.jsx)(s.a,{href:"https://www.infineon.com/evaluation-board/CY8CPROTO-062-4343W",children:"CY8CPROTO-062-4343W board"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"https://www.infineon.com/assets/row/public/documents/30/57/infineon-psoc-6-mcu-psoc-62-register-technical-reference-manual-additionaltechnicalinformation-en.pdf",children:"Registers Technical Reference Manual"})}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"https://www.infineon.com/assets/row/public/documents/30/44/infineon-cy8cproto-062-4343w-psoc-6-wi-fi-bt-prototyping-kit-guide-usermanual-en.pdf",children:"PSoC 6 Wi-Fi BT Prototyping Kit Guide"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"microcontroller",children:"Microcontroller"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"PSoC 6 Dual-Core MCU"}),"\n",(0,a.jsx)(s.li,{children:"ARM Cortex-M4 (150 MHz) + ARM Cortex-M0+ (100 MHz)"}),"\n",(0,a.jsx)(s.li,{children:"1 MB Flash, 288 KB SRAM"}),"\n",(0,a.jsx)(s.li,{children:"Ultra-low power consumption"}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"wireless-connectivity",children:"Wireless Connectivity"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"CYW4343W Module"}),"\n",(0,a.jsx)(s.li,{children:"Wi-Fi 802.11 b/g/n"}),"\n",(0,a.jsx)(s.li,{children:"Bluetooth 4.1 (Classic + BLE)"}),"\n",(0,a.jsx)(s.li,{children:"Integrated antenna"}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["Boards Provided by\n",(0,a.jsx)(s.img,{alt:"Infineon",src:n(90921).A+"",width:"378",height:"165"})]}),"\n",(0,a.jsx)(s.h2,{id:"tock",children:"Tock"}),"\n",(0,a.jsx)(s.p,{children:"Tock is an open-source embedded operating system for microcontrollers written in Rust. The operating system is designed to isolate components so untrusted third-party applications can run in a protected environment. Tock supports multiple platforms, such as RISC-V, Cortex-M or X86."}),"\n",(0,a.jsx)(s.h3,{id:"architecture",children:"Architecture"}),"\n",(0,a.jsx)(s.p,{children:"Tock uses a microkernel architecture: complex drivers and services are often implemented as untrusted processes, which other processes, such as applications, can invoke through inter-process communication (IPC).\nTock supports running multiple, independent applications written in any compiled language."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{src:"https://book.tockos.org/imgs/tock-stack.png",alt:"Tock stack"})}),"\n",(0,a.jsxs)(s.p,{children:["The above Figure shows Tock's architecture. Code falls into one of three categories: the ",(0,a.jsx)(s.strong,{children:"core kernel"}),", ",(0,a.jsx)(s.strong,{children:"capsules"}),", and ",(0,a.jsx)(s.strong,{children:"processes"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["The core kernel and capsules are both written in Rust. Rust is a type-safe systems language; other documents discuss the language and its implications to kernel design in greater detail, but the key idea is that Rust code can't use memory differently than intended (e.g., overflow buffers, forge pointers, or have pointers to dead stack frames). Because these restrictions prevent many things that an OS kernel has to do (such as access a peripheral that exists at a memory address specified in a datasheet), the very small core kernel is allowed to break them by using ",(0,a.jsx)(s.em,{children:'"unsafe"'})," Rust code. Capsules, however, cannot use unsafe features. This means that the core kernel code is very small and carefully written, while new capsules added to the kernel are safe code and so do not have to be trusted."]}),"\n",(0,a.jsx)(s.p,{children:"Processes can be written in any language. The kernel protects itself and other processes from bad process code by using a hardware memory protection unit (MPU). If a process tries to access memory it's not allowed to, this triggers an exception. The kernel handles this exception and kills the process."}),"\n",(0,a.jsx)(s.p,{children:"The kernel provides four major system calls:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"command"}),": makes a call from the process into the kernel"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"subscribe"}),": registers a callback in the process for an upcall from the kernel"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"allow"}),": gives kernel access to memory in the process"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"yield"}),": suspends process until after a callback is invoked"]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"Every system call except yield is non-blocking. Commands that might take a long time (such as sending a message over a UART) return immediately and issue a callback when they complete. The yield system call blocks the process until a callback is invoked; userland code typically implements blocking functions by invoking a command and then using yield to wait until the callback completes."}),"\n",(0,a.jsx)(s.p,{children:"The command, subscribe, and allow system calls all take a driver ID as their first parameter. This indicates which driver in the kernel that system call is intended for. Drivers are capsules that implement the system call."}),"\n",(0,a.jsx)(s.h2,{id:"hands-on-workshop",children:"Hands-on Workshop"}),"\n",(0,a.jsx)(s.h3,{id:"flashing-the-kernel",children:"Flashing the kernel"}),"\n",(0,a.jsxs)(s.p,{children:["Initially, you will need to clone the ",(0,a.jsx)(s.code,{children:"Tock"})," repository:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"git clone https://github.com/OxidosAutomotive/tock.git --branch=psoc6-workshop\ncd tock\n"})}),"\n",(0,a.jsx)(s.admonition,{title:"NixOS VM users",type:"note",children:(0,a.jsxs)(s.p,{children:["You don't have to clone the Tock OS repository, it is already cloned in the home directory.\nYou will have to run ",(0,a.jsx)(s.code,{children:"nix-shell"})," once you enter the ",(0,a.jsx)(s.code,{children:"tock"})," directory."]})}),"\n",(0,a.jsxs)(s.p,{children:["The configuration for the various boards supported can be found in the ",(0,a.jsx)(s.code,{children:"boards"})," directory. To compile the kernel, you can use the ",(0,a.jsx)(s.code,{children:"cargo flash"})," utility."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"cd boards/cy8cproto_62_4343_w\nmake flash\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Alternatively, you can use the ",(0,a.jsx)(s.code,{children:"cargo flash"})," while inside the board's directory."]}),"\n",(0,a.jsxs)(s.p,{children:["If you did everything correctly, you should be able to use the ",(0,a.jsx)(s.code,{children:"tockloader listen"})," command to interact with the kernel. When prompted to select a serial port, pick the one that ends with ",(0,a.jsx)(s.code,{children:"KitProg3 CMSIS-DAP"}),"."]}),"\n",(0,a.jsx)(s.admonition,{title:"NixOS VM users",type:"note",children:(0,a.jsxs)(s.p,{children:["Currently, ",(0,a.jsx)(s.code,{children:"tockloader"})," doesn't work on NixOS, but we have included the program ",(0,a.jsx)(s.code,{children:"picocom"}),"\nwhich you can use with the following command: ",(0,a.jsx)(s.code,{children:"picocom -b 115200 /dev/ttyACM0"}),". (use ",(0,a.jsx)(s.code,{children:"sudo"})," if it gives an error about permissions)"]})}),"\n",(0,a.jsx)(s.p,{children:"cargo flash"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'\nAlternatively, you can use the `make flash` while inside the board\'s directory.\n\nIf you did everything correctly, you should be able to use the `tockloader listen` command to interact with the kernel. When prompted to select a serial port, pick the one that ends with `KitProg3 CMSIS-DAP`.\n\n```shell\ntockloader listen\n[INFO   ] No device name specified. Using default name "tock".\n[INFO   ] No serial port with device name "tock" found.\n[INFO   ] Found 2 serial ports.\nMultiple serial port options found. Which would you like to use?\n[0]     /dev/cu.debug-console - n/a\n[1]     /dev/cu.usbmodem1103 - KitProg3 CMSIS-DAP\n\nWhich option? [0] 1\n[INFO   ] Using "/dev/cu.usbmodem1103 - KitProg3 CMSIS-DAP".\n[INFO   ] Listening for serial output\n\ntock$\n'})}),"\n",(0,a.jsx)(s.h3,{id:"compiling-an-application",children:"Compiling an application"}),"\n",(0,a.jsxs)(s.p,{children:["For this task, you will have to clone the ",(0,a.jsx)(s.code,{children:"libtock-c"})," repository:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"git clone https://github.com/ipworkshop/libtock-c.git --branch=remove-risc\ncd libtock-c\n"})}),"\n",(0,a.jsx)(s.admonition,{title:"NixOS VM users",type:"note",children:(0,a.jsxs)(s.p,{children:["You don't have to clone the libtock-c repository, it is already cloned in the home directory.\nYou will have to run ",(0,a.jsx)(s.code,{children:"nix-shell"})," once you enter the ",(0,a.jsx)(s.code,{children:"libtock-c"})," directory.\nMake sure you don't run that command if you already ran ",(0,a.jsx)(s.code,{children:"nix-shell"})," inside another directory (either run ",(0,a.jsx)(s.code,{children:"exit"})," before, or use another shell)."]})}),"\n",(0,a.jsxs)(s.p,{children:["Navigate to the ",(0,a.jsx)(s.code,{children:"examples/blink"})," folder and take a look at the C application structure found in ",(0,a.jsx)(s.code,{children:"main.c"}),". To compile the application, simply run ",(0,a.jsx)(s.code,{children:"make"}),". This command will built the example applications for all target architectures supported by the library. Apps are compiled into TBFs (Tock Binary Format), and can be found in the ",(0,a.jsx)(s.code,{children:"build/<arch>"})," sub-directories. Tock also generates an archive of the same app, compiled for multiple architectures, for ease of use and portability, called a TAB(Tock Application Bundle) which can be loaded using the ",(0,a.jsx)(s.code,{children:"tockloader"})," utility."]}),"\n",(0,a.jsx)(s.h3,{id:"flashing-the-application",children:"Flashing the application"}),"\n",(0,a.jsxs)(s.p,{children:["Unfortunately, the board is not currently supported by the ",(0,a.jsx)(s.code,{children:"tockloader"})," project, so we will have to resort to bundling the kernel and application in a single binary and flashing it. The board you are using is a dual-core, with Tock running on the ",(0,a.jsx)(s.strong,{children:"CortexM0+"})," core, so the correct TBF can be found at ",(0,a.jsx)(s.code,{children:"examples/blink/build/cortex-m0/cortex-m0.tbf"}),". You will need to specify the path to the compiled application in the board's ",(0,a.jsx)(s.code,{children:"Makefile"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-Makefile",children:"APP=../../libtock-c/examples/sensors/build/cortex-m0/cortex-m0.tbf\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Then, run the ",(0,a.jsx)(s.code,{children:"make program"})," command in terminal. It will use the ",(0,a.jsx)(s.code,{children:"arm-none-eabi-objcopy"})," to merge the two binaries, and load it on the board. After the binary is flashed, you should see the on board LED blinking, and you should be able to see ",(0,a.jsx)(s.code,{children:"blink"})," in the apps list, using ",(0,a.jsx)(s.code,{children:"tockloader listen"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-sh",children:'tockloader listen\n[INFO   ] No device name specified. Using default name "tock".\n[INFO   ] No serial port with device name "tock" found.\n[INFO   ] Found 2 serial ports.\nMultiple serial port options found. Which would you like to use?\n[0]     /dev/cu.debug-console - n/a\n[1]     /dev/cu.usbmodem1103 - KitProg3 CMSIS-DAP\n\nWhich option? [0] 1\n[INFO   ] Using "/dev/cu.usbmodem1103 - KitProg3 CMSIS-DAP".\n[INFO   ] Listening for serial output\n\ntock$ list\n PID    ShortID    Name                Quanta  Syscalls  Restarts  Grants  State\n 0      Unique     blink                    0        84         0   1/ 8   Yielded\n'})}),"\n",(0,a.jsx)(s.h3,{id:"building-a-capsule",children:"Building a capsule"}),"\n",(0,a.jsxs)(s.p,{children:["A capsule is a kernel component acting as a device driver, or system service capsule. Capsules sit between the low-level drivers of the core kernel and use the HIL traits to interact with them, and the userspace applications, which utilizes its ",(0,a.jsx)(s.code,{children:"SyscallDriver"})," interface. For this task, we will build a ",(0,a.jsx)(s.code,{children:"MockCapsule"}),", that will print a debug message on application command."]}),"\n",(0,a.jsxs)(s.p,{children:["The first step is to define the ",(0,a.jsx)(s.code,{children:"MockCapsule"})," driver, and implement the ",(0,a.jsx)(s.code,{children:"SyscallDriver"}),". You can create a new module in the ",(0,a.jsx)(s.code,{children:"capsules/extra"})," crate named ",(0,a.jsx)(s.code,{children:"mock.rs"}),". We also will need to chose an unused driver number to use (",(0,a.jsx)(s.code,{children:"0x9000A"})," will work)."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-Rust",metastring:'title="capsule/extra/mock.rs"',children:"use kernel::{\n    syscall::{CommandReturn, SyscallDriver},\n    ErrorCode,\n};\n\npub const DRIVER_NUM: usize = 0x9000A;\n\npub struct MockCapsule;\n\nimpl SyscallDriver for MockCapsule {\n    fn command(\n        &self,\n        command_num: usize,\n        _: usize,\n        _: usize,\n        _process_id: kernel::ProcessId,\n    ) -> kernel::syscall::CommandReturn {\n        match command_num {\n            _ => CommandReturn::failure(ErrorCode::NOSUPPORT),\n        }\n    }\n\n    fn allocate_grant(&self, _process_id: kernel::ProcessId) -> Result<(), kernel::process::Error> {\n        // No-op implementation\n        Ok(())\n    }\n}\n"})}),"\n",(0,a.jsx)(s.admonition,{title:"Module definition",type:"note",children:(0,a.jsxs)(s.p,{children:["Do not forget to add ",(0,a.jsx)(s.code,{children:"pub mod mock;"})," in ",(0,a.jsx)(s.code,{children:"capsules/extra/src/lib.rs"}),"."]})}),"\n",(0,a.jsxs)(s.p,{children:["The next step is to implement the handling of specific commands. The convention is that the first command (",(0,a.jsx)(s.code,{children:"0"}),") to be an ",(0,a.jsx)(s.em,{children:'"exists"'})," command, that is usually used to check wether a driver is present or not in the board configuration, and it should simply return a ",(0,a.jsx)(s.code,{children:"CommandReturn::success()"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["We also need to add our print command, on command number ",(0,a.jsx)(s.code,{children:"1"}),". For serial debug printing, the kernel exposes two macros, ",(0,a.jsx)(s.code,{children:"kernel::debug!"})," and ",(0,a.jsx)(s.code,{children:"kernel::debug_verbose!"}),". Try to use both of them and spot the difference."]}),"\n",(0,a.jsxs)(s.p,{children:["With our capsule implementation done, we need to add it to the board's configuration. We need to add a field for the capsule in the board's ",(0,a.jsx)(s.code,{children:"Cy8cproto0624343w"})," structure."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/cy8cproto_62_4343_w/src/main.rs"',children:"/// Supported drivers by the platform\npub struct Cy8cproto0624343w {\n    // ... Previous lines removed for simplicity\n    systick: cortexm0p::systick::SysTick,\n    // highlight-next-line\n    mock_capsule: &'static capsules_extra::mock::MockCapsule,\n}\n\nimpl SyscallDriverLookup for Cy8cproto0624343w {\n    fn with_driver<F, R>(&self, driver_num: usize, f: F) -> R\n    where\n        F: FnOnce(Option<&dyn kernel::syscall::SyscallDriver>) -> R,\n    {\n        match driver_num {\n            // ...\n            capsules_core::gpio::DRIVER_NUM => f(Some(self.gpio)),\n            // highlight-next-line\n            capsules_extra::mock::DRIVER_NUM => f(Some(self.mock_capsule)),\n            _ => f(None),\n        }\n    }\n}\n\n// ...\n\npub unsafe fn main() {\n    // ...\n\n    let cy8cproto0624343w = Cy8cproto0624343w {\n        // ...\n        gpio,\n        // Currently, the CPU runs at 8MHz, that being the frequency of the IMO.\n        systick: cortexm0p::systick::SysTick::new_with_calibration(8_000_000),\n        // highlight-next-line\n        mock_capsule: &capsules_extra::mock::MockCapsule,\n    };\n\n    // ...\n}\n"})}),"\n",(0,a.jsx)(s.h3,{id:"writing-an-application",children:"Writing an application"}),"\n",(0,a.jsxs)(s.p,{children:["To test the capsule we just created, we will need an application. This app will check if the driver is present in the kernel configuration, then it will issue a ",(0,a.jsx)(s.em,{children:'"print"'})," command to the driver every second."]}),"\n",(0,a.jsxs)(s.p,{children:["The simplest way to do this is to create a new entry in the ",(0,a.jsx)(s.code,{children:"examples"})," directory, then import the ",(0,a.jsx)(s.code,{children:"Makefile"})," from the ",(0,a.jsx)(s.code,{children:"blink"})," example. We will also need to create an API for issuing commands to the capsule. This is usually done in a separate ",(0,a.jsx)(s.code,{children:".c"})," file, and further exposed in a header file to be used by application developers, but for the task at hand, defining them in ",(0,a.jsx)(s.code,{children:"main.c"})," will work."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-c",metastring:'title="examples/ws-mock-test/main.c"',children:"#include <libtock/tock.h>\n\n#define MOCK_DRIVER_NUM 0x9000A\n#define MOCK_EXIST 0x0\n#define MOCK_PRINT 0x1\n\nint check_mock_driver_exists(void);\nint mock_print(void);\n\nint check_mock_driver_exists(void) {\n  syscall_return_t ret = command(MOCK_DRIVER_NUM, MOCK_EXIST, 0, 0);\n  return tock_command_return_novalue_to_returncode(ret);\n}\n\nint mock_print(void) {\n  syscall_return_t ret = command(MOCK_DRIVER_NUM, MOCK_PRINT, 0, 0);\n  return tock_command_return_novalue_to_returncode(ret);\n}\n\nint main(void) {\n}\n"})}),"\n",(0,a.jsxs)(s.admonition,{type:"note",children:[(0,a.jsxs)(s.mdxAdmonitionTitle,{children:[(0,a.jsx)(s.code,{children:"tock.h"})," API"]}),(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"syscall_return_t"})," type is the representation of the ",(0,a.jsx)(s.code,{children:"CommandReturn"})," type seen in kernel. Tock supports returning either a success or error response to system calls, along with a payload of up to two ",(0,a.jsx)(s.code,{children:"u32"}),"s in size. The developer must be aware of the return type used by a respective command of a driver to correctly decode the response message. In our case, both commands used return no payload so the ",(0,a.jsx)(s.code,{children:"tock_command_return_novalue_to_returncode"}),"."]})]}),"\n",(0,a.jsx)(s.p,{children:"Now, we need to complete the implementation of the main function."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-c",metastring:'title="example/ws-mock-test/main.c"',children:'#include <libtock/tock.h>\n\n#include <libtock-sync/services/alarm.h>\n\n// Headers for `printf`\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n\n// ... \n\nint main(void) {\n  printf("Mock capsule test\\n");\n\n  int err = check_mock_driver_exists();\n  if (err < 0) {\n    printf("Mock capsule missing");\n    return err;\n  }\n\n  while (true) {\n    mock_print();\n    // This delay uses an underlying alarm in the kernel.\n    libtocksync_alarm_delay_ms(1000);\n  }\n}\n'})}),"\n",(0,a.jsxs)(s.p,{children:["To test the application, run the ",(0,a.jsx)(s.code,{children:"make"})," command in the example's root directory, change the ",(0,a.jsx)(s.code,{children:"APP"})," Makefile variable in the board's directory and run ",(0,a.jsx)(s.code,{children:"make program"}),"."]}),"\n",(0,a.jsx)(s.h3,{id:"periodic-print",children:"Periodic Print"}),"\n",(0,a.jsxs)(s.p,{children:["We want to modify the capsule now, so that it prints a message every second, without the application's intervention. First we must modify the ",(0,a.jsx)(s.code,{children:"Mock"})," capsule structure, to include a reference to an ",(0,a.jsx)(s.em,{children:'"Alarm source"'}),". To do so, we should make the structure generic over any implementor of the ",(0,a.jsx)(s.code,{children:"hil"})]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/src/mock.rs"',children:"use kernel::hil::time;\n\npub struct MockCapsule<'a, A: time::Alarm<'a>> {\n    alarm: &'a A,\n}\n\nimpl<'a, A: time::Alarm<'a>> MockCapsule<'a, A> {\n    pub fn new(alarm: &'a A) -> Self {\n        Self { alarm }\n    }\n}\n\n// ...\n"})}),"\n",(0,a.jsxs)(s.admonition,{type:"note",children:[(0,a.jsxs)(s.mdxAdmonitionTitle,{children:[(0,a.jsx)(s.code,{children:"impl"})," block"]}),(0,a.jsxs)(s.p,{children:["Do not forget to change the ",(0,a.jsx)(s.code,{children:"SyscallDriver"})," implementation block to use the newly added generic and lifetime."]})]}),"\n",(0,a.jsxs)(s.h4,{id:"tock-alarm-design",children:["Tock ",(0,a.jsx)(s.code,{children:"Alarm"})," design"]}),"\n",(0,a.jsxs)(s.p,{children:["Tock is asynchronous by design, and any time consuming operation, such as adding delays in code, must not block the execution of the kernel. Non-blocking delays using a callback based mechanism, where the piece of code that must await a period of time arms an alarm using the interface exposed by the ",(0,a.jsx)(s.code,{children:"time::Alarm"})," trait, and the underlying alarm will call a previously defined function at the expiration moment. The function to be invoked is specified by implementing the ",(0,a.jsx)(s.code,{children:"time::AlarmClient"}),", and is the sole method ",(0,a.jsx)(s.code,{children:"alarm"}),"."]}),"\n",(0,a.jsx)(s.p,{children:"In our case, the implementation is straight forward. The capsule will print a message, and then re-arm the alarm:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/src/mock.rs"',children:"use kernel::hil::time::ConvertTicks;\n\n// ...\n\nimpl<'a, A: time::Alarm<'a>> MockCapsule<'a, A> {\n    pub fn new(alarm: &'a A) -> Self { /* ... */}\n\n    // We must also add an `init` function to start this cycle.\n    pub fn init(&'a self) {\n        let dt = self.alarm.ticks_from_seconds(1);\n        self.alarm.set_alarm(self.alarm.now(), dt);\n    }\n}\n\nimpl<'a, A: time::Alarm<'a>> AlarmClient for MockCapsule<'a, A> {\n    fn alarm(&self) {\n        kernel::debug!(\"Periodic \\\"hi\\\" message\");\n        let dt = self.alarm.ticks_from_seconds(1);\n        self.alarm.set_alarm(self.alarm.now(), dt);\n    }\n}\n"})}),"\n",(0,a.jsxs)(s.h4,{id:"component-system",children:[(0,a.jsx)(s.code,{children:"Component"})," system"]}),"\n",(0,a.jsx)(s.p,{children:"In Tock, initializing a board mainly consists of three steps:"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Setting any MCU-specific configurations necessary for the MCU to operate correctly."}),"\n",(0,a.jsx)(s.li,{children:"Statically declaring memory for various kernel resources (i.e. capsules) and configuring the capsules correctly."}),"\n",(0,a.jsx)(s.li,{children:"Loading processes, configuring the core kernel, and starting the kernel."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"Components are designed to simplify the second step (configuring capsules) while also reducing the chance for misconfiguration or other setup errors. A component encapsulates peripheral-specific and capsule-specific initialization for the Tock kernel in a factory method, which reduces repeated code and simplifies the boot sequence."}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"Component"})," trait encapsulates all of the initialization and configuration of a kernel extension inside the ",(0,a.jsx)(s.code,{children:"Component::finalize()"})," function call. The ",(0,a.jsx)(s.code,{children:"Component::Output"})," type defines what type this component generates. Note that instantiating a component does not instantiate the underlying ",(0,a.jsx)(s.code,{children:"Component::Output"})," type; instead, the memory is statically allocated and provided as an argument to the ",(0,a.jsx)(s.code,{children:"Component::finalize()"})," method, which correctly initializes the memory to instantiate the ",(0,a.jsx)(s.code,{children:"Component::Output"})," object. If instantiating and initializing the ",(0,a.jsx)(s.code,{children:"Component::Output"})," type requires parameters, these should be passed in the component's ",(0,a.jsx)(s.code,{children:"new()"})," function."]}),"\n",(0,a.jsx)(s.p,{children:"Using a component is as follows:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"let obj = CapsuleComponent::new(configuration, required_hw)\n    .finalize(capsule_component_static!());\n"})}),"\n",(0,a.jsxs)(s.p,{children:["All required resources and configuration is passed via the constructor, and all required static memory is defined by the ",(0,a.jsx)(s.code,{children:"[name]_component_static!()"})," macro and passed to the ",(0,a.jsx)(s.code,{children:"finalize()"})," method."]}),"\n",(0,a.jsxs)(s.p,{children:["As mentioned before, the capsule will need an alarm source. Most microcontrollers do not have an abundance of hardware sources to fulfill the needs of every scenario, so there is a need to multiplex one or more time-sources to be able to configure multiple alarms. Tock has support for this through ",(0,a.jsx)(s.code,{children:"VirtualMuxAlarms"})," which act as alarm sources but all multiplex a single ",(0,a.jsx)(s.code,{children:"MuxAlarm"}),", backed by a board's peripheral."]}),"\n",(0,a.jsxs)(s.p,{children:["The component must receive a ",(0,a.jsx)(s.strong,{children:"static"})," reference to a generic ",(0,a.jsx)(s.code,{children:"MuxAlarm"}),", and should create and setup a new virtual alarm instance, whose client must be the mock capsule it will generate. As a result, the component will need a static memory regions (",(0,a.jsx)(s.code,{children:"StaticInput"})," type) for both the ",(0,a.jsx)(s.code,{children:"MockCapsule"})," and the ",(0,a.jsx)(s.code,{children:"VirtualMuxAlarm"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/components/src/mock.rs"',children:"pub struct MockCapsuleComponent<A: 'static + Alarm<'static>> {\n    alarm_mux: &'static MuxAlarm<'static, A>,\n}\n\nimpl<A: 'static + Alarm<'static>> MockCapsuleComponent<A> {\n    pub fn new(alarm_mux: &'static MuxAlarm<'static, A>) -> Self {\n        Self { alarm_mux }\n    }\n}\n\nimpl<A: 'static + Alarm<'static>> Component for MockCapsuleComponent<A> {\n    type StaticInput = (\n        &'static mut MaybeUninit<VirtualMuxAlarm<'static, A>>,\n        &'static mut MaybeUninit<MockCapsule<'static, VirtualMuxAlarm<'static, A>>>,\n    );\n\n    type Output = &'static MockCapsule<'static, VirtualMuxAlarm<'static, A>>;\n\n    fn finalize(self, static_memory: Self::StaticInput) -> Self::Output {\n        let virtual_alarm = static_memory.0.write(VirtualMuxAlarm::new(self.alarm_mux));\n        virtual_alarm.setup();\n\n        let mock = static_memory.1.write(MockCapsule::new(virtual_alarm));\n        virtual_alarm.set_alarm_client(mock);\n\n        mock\n    }\n}\n"})}),"\n",(0,a.jsx)(s.admonition,{title:"Module definition",type:"note",children:(0,a.jsxs)(s.p,{children:["Do not forget to add ",(0,a.jsx)(s.code,{children:"pub mod mock;"})," in ",(0,a.jsx)(s.code,{children:"boards/components/src/lib.rs"}),"."]})}),"\n",(0,a.jsxs)(s.p,{children:["The allocation of the memory segments is usually done through a marco. It is out of this workshop's scope to dive into writing macros, but the macro bellow takes a ",(0,a.jsx)(s.code,{children:"type"})," that must implement the ",(0,a.jsx)(s.code,{children:"hil::time::Alarm"})," trait and returns a tuple of static mutable references to ",(0,a.jsx)(s.code,{children:"MaybeUninit"})," wrappers of the ",(0,a.jsx)(s.code,{children:"VirtualMuxAlarm"})," nad the ",(0,a.jsx)(s.code,{children:"MockCapsule"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/components/src/mock.rs"',children:"// ...\n\n#[macro_export]\nmacro_rules! mock_component_static {\n    ($A:ty $(,)?) => {{\n        let virtual_alarm = kernel::static_buf!(\n            capsules_core::virtualizers::virtual_alarm::VirtualMuxAlarm<'static, $A>\n        );\n\n        let mock = kernel::static_buf!(\n            capsules_extra::mock::MockCapsule<'static, VirtualMuxAlarm<'static, $A>>\n        );\n\n        (virtual_alarm, mock)\n    };};\n}\n"})}),"\n",(0,a.jsxs)(s.admonition,{type:"note",children:[(0,a.jsx)(s.mdxAdmonitionTitle,{children:(0,a.jsx)(s.code,{children:"MaybeUninit"})}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.code,{children:"MaybeUninit<T>"})," in Rust is a special wrapper type that allows you to safely work with memory that has not been initialized yet. Normally, Rust enforces that all variables are fully initialized before use to maintain memory safety. However, some situations require allocating memory first and filling it later."]})]}),"\n",(0,a.jsx)(s.h4,{id:"refactor-boards-configuration",children:"Refactor board's configuration"}),"\n",(0,a.jsx)(s.p,{children:"Because we made fundamental changes to the capsule, we need to make a few modifications in order to run the kernel."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/cy8cproto_62_4343_w/src/main.rs"',children:"/// Supported drivers by the platform\npub struct Cy8cproto0624343w {\n    // ...\n    systick: cortexm0p::systick::SysTick,\n    // highlight-start\n    mock_capsule: &'static capsules_extra::mock::MockCapsule<\n        'static,\n        VirtualMuxAlarm<'static, psoc62xa::tcpwm::Tcpwm0<'static>>,\n    >,\n    // highlight-end\n}\n\n// ... \n\npub unsafe fn main() {\n    // ...\n\n    // highlight-start\n    let mock_capsule = components::mock::MockCapsuleComponent::new(mux_alarm)\n        .finalize(components::mock_component_static!(psoc62xa::tcpwm::Tcpwm0));\n    mock_capsule.init();\n    // highlight-end\n\n    let cy8cproto0624343w = Cy8cproto0624343w {\n        // ...\n        gpio,\n        // Currently, the CPU runs at 8MHz, that being the frequency of the IMO.\n        systick: cortexm0p::systick::SysTick::new_with_calibration(8_000_000),\n        // highlight-next-line\n        mock_capsule\n    };\n\n    // ...\n    \n}\n"})}),"\n",(0,a.jsx)(s.p,{children:"To test our modifications, as now we no longer need an application, run:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-shell",children:"probe-rs erase --chip CY8C624ABZI-S2D44\nmake flash\n"})}),"\n",(0,a.jsx)(s.h3,{id:"temperature-sensor-capsule",children:"Temperature Sensor Capsule"}),"\n",(0,a.jsx)(s.p,{children:"For this task, we will have to read the ambient temperature using the onboard thermistor. A thermistor is a temperature-sensitive resistor in which resistance varies with temperature. The thermistor is in a voltage divider configuration which can be seen bellow:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Thermistor Configuration",src:n(30392).A+"",width:"348",height:"332"})}),"\n",(0,a.jsxs)(s.p,{children:["Given that the current flowing through ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"r"}),(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsx)(s.mi,{children:"f"})]})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"R_{ref}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"re"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," also flows through the thermistor:"]}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsx)(s.mn,{children:"1"})]}),(0,a.jsx)(s.mo,{children:"\u2212"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsx)(s.mn,{children:"0"})]})]}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"t"}),(0,a.jsx)(s.mi,{children:"h"}),(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsx)(s.mi,{children:"r"}),(0,a.jsx)(s.mi,{children:"m"})]})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsx)(s.mn,{children:"2"})]}),(0,a.jsx)(s.mo,{children:"\u2212"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsx)(s.mn,{children:"1"})]})]}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"r"}),(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsx)(s.mi,{children:"f"})]})]})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\frac{V_1 - V_0}{R_{therm}} = \\frac{V_2 - V_1}{R_{ref}}"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.1963em",verticalAlign:"-0.836em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"er"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"m"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"0"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.836em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.3324em",verticalAlign:"-0.9721em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3603em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"re"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.9721em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Steinhart%E2%80%93Hart_equation",children:"Steinhart-Hart"})," equation describes the resistance change of a semiconductor thermistor as related to its temperature. The following equation shows it to be a third-order logarithmic polynomial using three constants."]}),"\n",(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.mfrac,{children:[(0,a.jsx)(s.mn,{children:"1"}),(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mi,{children:"K"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mi,{children:"A"}),(0,a.jsx)(s.mo,{children:"+"}),(0,a.jsx)(s.mi,{children:"B"}),(0,a.jsx)(s.mo,{children:"\u22c5"}),(0,a.jsx)(s.mi,{children:"ln"}),(0,a.jsx)(s.mo,{children:"\u2061"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"}),(0,a.jsx)(s.mo,{children:"+"}),(0,a.jsx)(s.mi,{children:"C"}),(0,a.jsx)(s.mo,{children:"\u22c5"}),(0,a.jsx)(s.mi,{children:"ln"}),(0,a.jsx)(s.mo,{children:"\u2061"}),(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsxs)(s.msup,{children:[(0,a.jsx)(s.mo,{stretchy:"false",children:")"}),(0,a.jsx)(s.mn,{children:"3"})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\frac{1}{T_K} = A + B \\cdot \\ln(R) + C \\cdot \\ln(R)^3"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"2.1574em",verticalAlign:"-0.836em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"1.3214em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3283em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord",children:(0,a.jsx)(s.span,{className:"mord",children:"1"})})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.836em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"A"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"+"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u22c5"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mop",children:"ln"}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"mclose",children:")"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"+"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u22c5"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1.1141em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mop",children:"ln"}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsxs)(s.span,{className:"mclose",children:[(0,a.jsx)(s.span,{className:"mclose",children:")"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.8641em"},children:(0,a.jsxs)(s.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"3"})})]})})})})})]})]})]})]})}),"\n",(0,a.jsxs)(s.p,{children:["Where ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{children:"A"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"A"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"A"})]})})]}),", ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{children:"B"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"B"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"})]})})]})," and ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{children:"C"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"C"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})})]})," are empirical constants, ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{children:"R"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"R"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"})]})})]})," is the thermistor's resistance in ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{mathvariant:"normal",children:"\u03a9"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\Omega"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord",children:"\u03a9"})]})})]})," and ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"T"}),(0,a.jsx)(s.mi,{children:"k"})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"T_k"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]})]})})]})," is the temperature in kelvin."]}),"\n",(0,a.jsxs)(s.p,{children:["Consulting the ",(0,a.jsx)(s.a,{href:"https://www.infineon.com/assets/row/public/documents/30/44/infineon-cy8cproto-062-4343w-psoc-6-wi-fi-bt-prototyping-kit-guide-usermanual-en.pdf",children:"board's manual"}),", we can see that the voltage divider uses a ",(0,a.jsx)(s.code,{children:"10K"})," resistor, so ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"R"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"r"}),(0,a.jsx)(s.mi,{children:"e"}),(0,a.jsx)(s.mi,{children:"f"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mn,{children:"10000"}),(0,a.jsx)(s.mi,{mathvariant:"normal",children:"\u03a9"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"R_{ref} = 10000\\Omega"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"re"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})]})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(s.span,{className:"mord",children:"10000\u03a9"})]})]})]}),"."]}),"\n",(0,a.jsx)(s.h4,{id:"current-state",children:"Current state"}),"\n",(0,a.jsxs)(s.p,{children:["The underlying ADC peripheral implementation has two channels configured (",(0,a.jsx)(s.code,{children:"AdcChannel0"})," and ",(0,a.jsx)(s.code,{children:"AdcChannel1"}),") to sample on demand the two voltage drops on the resistor and thermistor. Also, the four pins mentioned in the schematic are properly setup by the board configuration, in the ",(0,a.jsx)(s.code,{children:"TEMPERATURE"})," section."]}),"\n",(0,a.jsxs)(s.h4,{id:"temperaturesensor-in-tock",children:[(0,a.jsx)(s.code,{children:"TemperatureSensor"})," in Tock"]}),"\n",(0,a.jsxs)(s.p,{children:["Tock already has an implementation for a ",(0,a.jsx)(s.code,{children:"SyscallDriver"})," capsule for reading the temperature. It can be found in the  ",(0,a.jsx)(s.code,{children:"capsules/extra/src/temperature.rs"})," module. It utilizes a trait for interacting with various temperature sensors called ",(0,a.jsx)(s.code,{children:"TemperatureDriver"}),", that works in the same notification based paradigm as the ",(0,a.jsx)(s.code,{children:"Alarm"}),", notifying the client when the temperature measurement is complete. Our goal will be to implement this trait for our new ",(0,a.jsx)(s.code,{children:"Cy8cprotoThermistor"})," capsule."]}),"\n",(0,a.jsxs)(s.p,{children:["As before, the first step will be to define our new module, ",(0,a.jsx)(s.code,{children:"cy8cproto_thermistor.rs"})," and define the structure of our capsule. The capsule will need references to both ",(0,a.jsx)(s.code,{children:"AdcChannel"}),"s, and will need to hold a client reference, to notify them."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/scr/cy8cproto_thermistor.rs"',children:"pub struct Cy8cprotoThermistor<'a, A: adc::AdcChannel<'a>> {\n    thermistor_adc: &'a A,\n    resistor_adc: &'a A,\n    client: OptionalCell<&'a dyn sensors::TemperatureClient>,\n}\n"})}),"\n",(0,a.jsxs)(s.p,{children:["We need to implement the ",(0,a.jsx)(s.code,{children:"TemperatureDriver"})," trait for our thermistor capsule. The implementation for the ",(0,a.jsx)(s.code,{children:"set_client"})," method is straight-forward, and the ",(0,a.jsx)(s.code,{children:"read_temperature"})," would, in theory, need to start the sampling of both channels."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/scr/cy8cproto_thermistor.rs"',children:"impl<'a, A: adc::AdcChannel<'a>> TemperatureDriver<'a> for Cy8cprotoThermistor<'a, A> {\n    fn set_client(&self, client: &'a dyn sensors::TemperatureClient) {\n        self.client.set(client);\n    }\n\n    fn read_temperature(&self) -> Result<(), kernel::ErrorCode> {\n        self.thermistor_adc.sample();\n        self.resistor_adc.sample();\n        Ok(())\n    }\n}\n"})}),"\n",(0,a.jsx)(s.admonition,{title:"Error handling",type:"warning",children:(0,a.jsx)(s.p,{children:"This implementation disregards error handling for education purposes, both sample functions may fail, and need proper handling."})}),"\n",(0,a.jsxs)(s.p,{children:["This capsule will be a client to both the ",(0,a.jsx)(s.code,{children:"AdcChannel"}),"s, so the next logical step is to implement the ",(0,a.jsx)(s.code,{children:"AdcClient"})," trait."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/scr/cy8cproto_thermistor.rs"',children:"impl<'a, A: adc::AdcChannel<'a>> adc::Client for Cy8cprotoThermistor<'a, A> {\n    fn sample_ready(&self, sample: u16) {\n        todo!()\n    }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:"This is where we encounter our first issue. Both channels will use the same interface, and therefore the same method implementation when the sampling is done. This means that the capsule has no way of distinguishing between the samples."}),"\n",(0,a.jsx)(s.h4,{id:"state-machine-design",children:"State machine design"}),"\n",(0,a.jsx)(s.p,{children:"One viable alternative would be implementing a state machine for sampling both channels and computing the temperature."}),"\n",(0,a.jsx)(s.mermaid,{value:'---\nconfig:\n  theme: redux\n---\nflowchart TD\n    A(["Idle"]) -- read_temperature() --\x3e B{"Sample Resistor"}\n    B -- Error --\x3e D(["Report Error"])\n    B -- Await sample result --\x3e C{"Sample Thermistor"}\n    C -- Error --\x3e D\n    C -- Await sample result --\x3e F(["Report Temperature"])\n    F --\x3e A\n    D --\x3e A'}),"\n",(0,a.jsxs)(s.p,{children:["We need to define the internal state of the capsule, and to do that, we will use an ",(0,a.jsx)(s.code,{children:"enum"}),". We will also need to store the result of the resistor sample in capsule."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/scr/cy8cproto_thermistor.rs"',children:"#[derive(Clone, Copy)]\nenum Status {\n    Idle,\n    AwaitingThermistorReading,\n    AwaitingResistorReading,\n}\n\npub struct Cy8cprotoThermistor<'a, A: adc::AdcChannel<'a>> {\n    thermistor_adc: &'a A,\n    resistor_adc: &'a A,\n    resistor_sample: OptionalCell<u16>,\n    status: Cell<Status>,\n    client: OptionalCell<&'a dyn sensors::TemperatureClient>,\n}\n\nimpl<'a, A: adc::AdcChannel<'a>> Cy8cprotoThermistor<'a, A> {\n    pub fn new(thermistor_adc: &'a A, resistor_adc: &'a A) -> Self {\n        Self {\n            thermistor_adc,\n            resistor_adc,\n            resistor_sample: OptionalCell::empty(),\n            status: Cell::new(Status::Idle),\n            client: OptionalCell::empty(),\n        }\n    }\n}\n"})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"read_temperature"})," method will start the resistor measurement and will change the inner state."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/scr/cy8cproto_thermistor.rs"',children:"impl<'a, A: adc::AdcChannel<'a>> TemperatureDriver<'a> for Cy8cprotoThermistor<'a, A> {\n    fn set_client(&self, client: &'a dyn sensors::TemperatureClient) {\n        self.client.set(client);\n    }\n\n    fn read_temperature(&self) -> Result<(), kernel::ErrorCode> {\n        let res = self.thermistor_adc.sample();\n        if res.is_ok() {\n            self.status.set(Status::AwaitingThermistorReading);\n        }\n        res\n    }\n}\n"})}),"\n",(0,a.jsxs)(s.p,{children:["The implementation of the ",(0,a.jsx)(s.code,{children:"AdcClient"})," sole method, ",(0,a.jsx)(s.code,{children:"sample_ready"})," will have to take into account the current state. If the method is called after the first reading (",(0,a.jsx)(s.code,{children:"status"})," is ",(0,a.jsx)(s.code,{children:"Status::AwaitingResistorReading"}),"), the capsule must store the result and start the thermistor sampling. If the method is called after both readings are performed, then the capsule must perform the computations mentioned above, to report the measured temperature in hundredths of degrees Celsius (centiCelsius)."]}),"\n",(0,a.jsxs)(s.admonition,{title:"Error handling",type:"note",children:[(0,a.jsxs)(s.p,{children:["Handle all possible errors that the ",(0,a.jsx)(s.code,{children:"sample"})," calls may yield by resetting both the thermistor state to ",(0,a.jsx)(s.code,{children:"Status::Idle"})," and the ",(0,a.jsx)(s.code,{children:"resistor_sample"}),", and reporting the error to the client."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="Reporting the result of a temperature reading"',children:"self.client.map(|client| client.callback(temp_reading_result))\n"})}),(0,a.jsxs)(s.p,{children:["In our case, the ",(0,a.jsx)(s.code,{children:"temp_reading_result"})," will be the sample error."]})]}),"\n",(0,a.jsx)(s.h4,{id:"computing-the-temperature",children:"Computing the temperature"}),"\n",(0,a.jsxs)(s.p,{children:["Based on the ",(0,a.jsx)(s.a,{href:"https://www.infineon.com/assets/row/public/documents/30/42/infineon-an2017-psoc-1-temperature-measurement-with-thermistor-applicationnotes-en.pdf?fileId=8ac78c8c7cdc391c017d072814bc4c7b",children:"Infineon documentation"}),", the empirical constants' values for the thermistor used by our board are:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"/// Reference Resistor value in Ohms\nconst R_REF: f64 = 10_000.0;\n\nconst A: f64 = 0.000891358;\nconst B: f64 = 0.000250618;\nconst C: f64 = 0.000000197;\n"})}),"\n",(0,a.jsxs)(s.p,{children:["To convert from the numerical values to voltages, we need to understand how ADCs work. Every ADC will have a resolution, which is the number of bits which can be used to store the sample result, and a sampling range which is the minimum-to-maximum input voltage it can measure. Our ADC has a resolution of 11 bits (based on the current configuration of the peripheral) and a input range of 0-3.3 Volts, meaning that the result can rage from ",(0,a.jsx)(s.code,{children:"0"}),", which represents the 0V potential to ",(0,a.jsx)(s.code,{children:"2047"})," (",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msup,{children:[(0,a.jsx)(s.mn,{children:"2"}),(0,a.jsx)(s.mn,{children:"11"})]}),(0,a.jsx)(s.mo,{children:"\u2212"}),(0,a.jsx)(s.mn,{children:"1"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"2^{11} - 1"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8974em",verticalAlign:"-0.0833em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord",children:"2"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"11"})})})]})})})})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(s.span,{className:"mord",children:"1"})]})]})]}),") which will represent 3V3."]}),"\n",(0,a.jsx)(s.p,{children:"Based on this, we can define a function that takes the discrete value of the sample and returns the voltage."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",children:"fn convert(sample: u16) -> f64 {\n    ((sample as f64) * 3.3) / 2047.0\n}\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Our implementation of the ",(0,a.jsx)(s.code,{children:"sample_ready"})," function should now be complete"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="capsules/extra/scr/cy8cproto_thermistor.rs"',children:"impl<'a, A: adc::AdcChannel<'a>> adc::Client for Cy8cprotoThermistor<'a, A> {\n    fn sample_ready(&self, sample: u16) {\n        match self.status.get() {\n            Status::Idle => (),\n            Status::AwaitingResistorReading => {\n                // ... Store the sample\n            }\n            Status::AwaitingThermistorReading => {\n                let sample_0 = self.resistor_sample.take().unwrap();\n                let sample_1 = sample;\n\n                let v1_0 = convert(sample_0);\n                let v2_1 = convert(sample_1);\n\n                let r_therm = R_REF * (v2_1 / v1_0);\n\n                let logarithm = libm::log(r_therm);\n                let logarithm3 = logarithm * logarithm * logarithm;\n\n                let temp_k = 1.0f64 / (A + B * logarithm + C * logarithm3);\n\n                let temp_celsius = temp_k - 273.15;\n\n                self.status.set(Status::Idle);\n                self.client\n                    .map(|client| client.callback(Ok((temp_celsius * 100.0) as i32)));\n            }\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(s.h4,{id:"defining-the-component",children:"Defining the component"}),"\n",(0,a.jsxs)(s.p,{children:["As before, we need to ensure the capsule can be easily configured by implementing a new ",(0,a.jsx)(s.code,{children:"Component"}),". You can name the module ",(0,a.jsx)(s.code,{children:"cy8cproto_thermistor.rs"}),".\nWe should start from the bottom up, considering what should be needed to instantiate this capsule. These are the ",(0,a.jsx)(s.code,{children:"AdcChannel"}),"s and an ",(0,a.jsx)(s.code,{children:"MuxAdc"}),", to be able to multiplex an ADC peripheral to sample multiple channels."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/components/src/cyc8proto_thermistor.rs"',children:"// This will be the output type of the component\npub type Cy8cprotoThermistorComponentType<A> =\n    capsules_extra::cy8cproto_thermistor::Cy8cprotoThermistor<'static, A>;\n\npub struct Cy8cprotoThermistorComponent<A: 'static + adc::Adc<'static>> {\n    adc_mux: &'static capsules_core::virtualizers::virtual_adc::MuxAdc<'static, A>,\n    thermistor_channel: A::Channel,\n    resistor_channel: A::Channel,\n}\n\nimpl<A: 'static + adc::Adc<'static>> Cy8cprotoThermistorComponent<A> {\n    pub fn new(\n        adc_mux: &'static capsules_core::virtualizers::virtual_adc::MuxAdc<'static, A>,\n        thermistor_channel: A::Channel,\n        resistor_channel: A::Channel,\n    ) -> Self {\n        Self {\n            adc_mux,\n            thermistor_channel,\n            resistor_channel,\n        }\n    }\n}\n"})}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"finalize"})," implementation of the ",(0,a.jsx)(s.code,{children:"Component"})," trait will need to create the two virtual ",(0,a.jsx)(s.code,{children:"AdcDevices"})," that multiplex the peripheral, and therefore, the static memory needed must accommodate the two devices, and the thermistor capsule."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/components/src/cy8cproto_thermistor.rs"',children:"impl<A: 'static + adc::Adc<'static>> Component for Cy8cprotoThermistorComponent<A> {\n    type StaticInput = (\n        &'static mut MaybeUninit<AdcDevice<'static, A>>,\n        &'static mut MaybeUninit<AdcDevice<'static, A>>,\n        &'static mut MaybeUninit<Cy8cprotoThermistorComponentType<AdcDevice<'static, A>>>,\n    );\n\n    type Output = &'static Cy8cprotoThermistorComponentType<AdcDevice<'static, A>>;\n\n    fn finalize(self, static_memory: Self::StaticInput) -> Self::Output {\n        let thermistor_device =\n            crate::adc::AdcComponent::new(self.adc_mux, self.thermistor_channel)\n                .finalize(static_memory.0);\n\n        let resistor_device = crate::adc::AdcComponent::new(self.adc_mux, self.resistor_channel)\n            .finalize(static_memory.1);\n\n        let cy8cproto_thermistor = static_memory.2.write(Cy8cprotoThermistorComponentType::new(\n            thermistor_device,\n            resistor_device,\n        ));\n\n        thermistor_device.set_client(cy8cproto_thermistor);\n        resistor_device.set_client(cy8cproto_thermistor);\n        cy8cproto_thermistor\n    }\n}\n"})}),"\n",(0,a.jsx)(s.p,{children:"The macro should look like this:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/components/src/cy8cproto_thermistor.rs"',children:"#[macro_export]\nmacro_rules! cy8cproto_thermistor_component_static {\n    ($A:ty $(,)?) => {{\n        let thermistor_device = components::adc_component_static!($A);\n        let resistor_device = components::adc_component_static!($A);\n        let cy8cproto_thermistor = kernel::static_buf!(\n            capsules_extra::cy8cproto_thermistor::Cy8cprotoThermistor<\n                'static,\n                capsules_core::virtualizers::virtual_adc::AdcDevice<'static, $A>,\n            >\n        );\n\n        (thermistor_device, resistor_device, cy8cproto_thermistor)\n    };};\n}\n"})}),"\n",(0,a.jsx)(s.h4,{id:"adding-the-capsule-to-the-board",children:"Adding the capsule to the board"}),"\n",(0,a.jsxs)(s.p,{children:["The final step is to add the newly defined capsule to the board's configuration. To do that, we must add the capsule\nto the ",(0,a.jsx)(s.code,{children:"Cy8cproto0624343w"})," structure, and to the ",(0,a.jsx)(s.code,{children:"SyscallDriverLookup"})," implementation, and configure it in the ",(0,a.jsx)(s.code,{children:"main"})," function."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-rust",metastring:'title="boards/cy8cproto_62_4343_w/src/main.rs"',children:"/// Supported drivers by the platform\npub struct Cy8cproto0624343w {\n    // ...\n    systick: cortexm0p::systick::SysTick,\n    // highlight-start\n    temp: &'static capsules_extra::temperature::TemperatureSensor<\n        'static,\n        capsules_extra::cy8cproto_thermistor::Cy8cprotoThermistor<\n            'static,\n            capsules_core::virtualizers::virtual_adc::AdcDevice<'static, Adc<'static>>,\n        >,\n    >,\n    // highlight-end\n}\n\nimpl SyscallDriverLookup for Cy8cproto0624343w {\n    fn with_driver<F, R>(&self, driver_num: usize, f: F) -> R\n    where\n        F: FnOnce(Option<&dyn kernel::syscall::SyscallDriver>) -> R,\n    {\n        match driver_num {\n            // ...\n            capsules_core::gpio::DRIVER_NUM => f(Some(self.gpio)),\n            // highlight-next-line\n            capsules_extra::temperature::DRIVER_NUM => f(Some(self.temp)),\n            _ => f(None),\n        }\n    }\n}\n\n// ...\n\npub unsafe fn main() {\n    // ...\n\n    //--------------------------------------------------------------------------\n    // TEMPERATURE\n    //--------------------------------------------------------------------------\n\n    // ... Pin configurations\n\n    let mux_adc = components::adc::AdcMuxComponent::new(&peripherals.adc)\n        .finalize(components::adc_mux_component_static!(sar::Adc));\n\n    // highlight-start\n    let thermistor = components::cy8cproto_thermistor::Cy8cprotoThermistorComponent::new(\n        mux_adc,\n        sar::AdcChannel::Channel0,\n        sar::AdcChannel::Channel1,\n    )\n    .finalize(cy8cproto_thermistor_component_static!(psoc62xa::sar::Adc));\n\n    let temp = components::temperature::TemperatureComponent::new(\n        board_kernel,\n        capsules_extra::temperature::DRIVER_NUM,\n        thermistor,\n    )\n    .finalize(components::temperature_component_static!(\n        capsules_extra::cy8cproto_thermistor::Cy8cprotoThermistor<\n            'static,\n            capsules_core::virtualizers::virtual_adc::AdcDevice<'static, Adc<'static>>,\n        >\n    ));\n    // highlight-end\n    \n    // ...\n}\n"})}),"\n",(0,a.jsx)(s.h4,{id:"sensors-application",children:"Sensors application"}),"\n",(0,a.jsxs)(s.p,{children:["Fortunately, ",(0,a.jsx)(s.code,{children:"libtock-c"})," already has a modular example that reads multiple sensors. This example can be found in the ",(0,a.jsx)(s.code,{children:"examples/sensors"})," subdirectory. To enable the temperature readings, we must set the ",(0,a.jsx)(s.code,{children:"temperature"})," variable."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-c",metastring:'title="examples/sensors/main.c"',children:"// ...\n#include <libtock/tock.h>\n\nstatic libtock_alarm_t alarm;\nstatic bool light          = false;\n// highlight-next-line\nstatic bool temperature    = true;\nstatic bool humidity       = false;\nstatic bool ninedof        = false;\nstatic bool ninedof_accel  = false;\nstatic bool ninedof_mag    = false;\nstatic bool ninedof_gyro   = false;\nstatic bool proximity      = false;\nstatic bool sound_pressure = false;\nstatic bool moisture       = false;\nstatic bool rainfall       = false;\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Then, compile the application, and flash it along the kernel. Do not forget to update the ",(0,a.jsx)(s.code,{children:"APP"})," variable in the board's ",(0,a.jsx)(s.code,{children:"Makefile"}),"."]})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},90921:(e,s,n)=>{n.d(s,{A:()=>t});const t="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iYSIgZGF0YS1uYW1lPSJsb2dvIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAuMDEybW0iIGhlaWdodD0iNDMuNzQ0bW0iIHZpZXdCb3g9IjAgMCAyODMuNSAxMjQiPgogIDxwYXRoIGQ9Ik0yMTEuMiw4My41YzEwLjYsMCwxMy45LTExLjIsMTMuOS0yMS41cy01LjgtMjEtMTMuOS0yMS0xMy44LDExLjItMTMuNywyMS4yYzAsOS45LDIuOSwyMS40LDEzLjcsMjEuNHYtLjFaTTIwNiw2MS45YzAtNC4xLDAtMTMuNyw1LjItMTMuN3M1LjQsOS41LDUuNCwxMy45LDAsMTQuNC01LjIsMTQuNC01LjUtMTAuMS01LjUtMTQuNWgwbC4xLS4xWk0xODAuNCw4My41YzQuMywwLDgtMS43LDExLjUtNS40bC0zLjEtNS44Yy0yLjQsMi42LTQuOCw0LTcuNyw0cy00LjQtMS40LTUuNi0zLjhjLTEtMi4xLTEuMi00LjUtMS4yLTcuMXYtLjhoMTh2LTEuOGMwLTguOS0xLjEtMTMuOC0zLjktMTcuNS0yLjEtMi44LTUuMi00LjMtOS00LjNzLTcuMywxLjgtOS43LDUuM2MtMi42LDMuOC0zLjcsOC45LTMuNywxNS45LDAsMTMuNCw1LjIsMjEuMywxNC40LDIxLjNoMFpNMTc5LjUsNDcuNmMyLDAsMy4yLDEuMSw0LDIuOS42LDEuNi45LDQuMy45LDcuNWgtMTAuMWMuMS03LjIsMS43LTEwLjQsNS4yLTEwLjRoMFpNMjMxLjcsODIuNWg3Ljh2LTMwYzEuOS0yLjMsNC4xLTMuNiw1LjctMy42czIsLjIsMi42LDFjLjYuOS45LDIuMi45LDUuM3YyNy4zaDcuOHYtMzAuOWMwLTIuNy0uMy01LjQtMS45LTcuNC0xLjQtMS44LTMuNi0yLjktNi40LTIuOXMtNy4yLDIuMS05LjMsNC41YzAtMi4xLS44LTQuMS0xLTQuOGwtNy4zLDEuOWMuNCwyLjIsMSw0LjksMSw5Ljh2MjkuN2gwbC4xLjFaTTE0MS4xLDQ1LjhjMC0yLjEtLjgtNC4xLTEtNC44bC03LjMsMS45Yy40LDIuMiwxLDQuOSwxLDkuOHYyOS43aDcuOHYtMzBjMS45LTIuMyw0LjEtMy42LDUuNy0zLjZzMiwuMiwyLjYsMWMuNi45LjksMi4yLjksNS4zdjI3LjNoNy44di0zMC45YzAtMi43LS4zLTUuNC0xLjktNy40LTEuNC0xLjgtMy42LTIuOS02LjQtMi45cy03LjIsMi4xLTkuMyw0LjVoMGwuMS4xWk00NS43LDI4LjNjNC42LDAsOC4zLTMuNyw4LjMtOC4zcy0zLjctOC4zLTguMy04LjMtOC4zLDMuNy04LjMsOC4zLDMuNyw4LjMsOC4zLDguM1pNODQsODIuNXYtMzAuOWMwLTIuNy0uMy01LjQtMS45LTcuNC0xLjQtMS44LTMuNi0yLjktNi40LTIuOXMtNy4yLDIuMS05LjMsNC41YzAtMi4xLS44LTQuMS0xLTQuOGwtNy4zLDEuOWMuNCwyLjIsMSw0LjksMSw5Ljh2MjkuN2g3Ljh2LTMwYzEuOS0yLjMsNC4xLTMuNiw1LjctMy42czIsLjIsMi42LDFjLjYuOS45LDIuMi45LDUuM3YyNy4zaDcuOGwuMS4xWk0xMTkuOSwyNi4xYy0yLjksMC01LjIsMi4zLTUuMiw1LjJzMi4zLDUuMiw1LjEsNS4yLDUuMi0yLjMsNS4yLTUuMi0yLjMtNS4yLTUuMS01LjJaTTQyLDgyLjVoNy44di00OC43bC03LjgsMXY0Ny43Wk0xMDUuNywzMC45YzEuNCwwLDIuOC41LDMuNywxLjJsMi4yLTYuMWMtMi4xLTEuNS00LjQtMi4yLTcuMy0yLjJzLTQuMS41LTYsMmMtMS45LDEuNi0zLjksNC44LTMuOSwxMC44cy4xLDUuMy4xLDUuM2gtMi43djYuOWgyLjd2MzMuNmg4di0zMy42aDUuOWwxLjQtNi45aC03LjN2LTYuMmMwLTMuMSwxLjItNC45LDMuMS00LjloMGwuMS4xWk0xMTUuOSw4Mi41aDcuOXYtNDEuMmwtNy45LDF2NDAuMloiIGZpbGw9IiMwMDVkYTkiLz4KICA8cGF0aCBkPSJNMjQwLjUsMTA0LjVjLTI2LjQsNy44LTU4LjUsMTEuMi04OS45LDExLjItNzkuNywwLTEzMS4xLTIzLjQtMTM0LjctNTQuMy0xLjMtMTEuNiw3LjgtMjIuOSwyMy0zMi41LTIuNy0yLTQuNC01LjItNC41LTguOEMxMi40LDMxLjcsMCw0Ni45LDAsNjIuM2MwLDM0LjEsNjAuOSw2Mi45LDE1MS40LDYxLjcsMzEuNS0uNCw1Ny44LTQuOSw4MS42LTEyLjcsMjguMy05LjIsNDYuMS0yMi40LDUwLjQtMjguMi01LjIsNC42LTE3LjMsMTMuOS00MywyMS41aDBsLjEtLjFaTTcyLjYsMTMuN2M1LjMtMS44LDEyLjgtNC4xLDEyLjgtNC4xQzEwNi40LDMuOCwxMjkuNy40LDE1MS40LjZjLTI1LTEuNS00Ny44LDAtNjcuNywzLjYsMCwwLTYuNiwxLjEtMTMuNywyLjksMCwwLTMuNC45LTUuNSwxLjVzLTUsMS40LTUsMS40Yy0yLC42LTQsMS4zLTYsMiwyLDIsMy4yLDQuNiwzLjMsNy42LDMuNC0xLjYsMTAuMS00LDE1LjYtNS45aC4yWiIgZmlsbD0iI2UzMDAzNCIvPgo8L3N2Zz4="}}]);